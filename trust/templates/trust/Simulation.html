{% extends "global/Simulation.html" %}
{% load staticfiles otree_tags %}
{% load i18n %}

{% block scripts %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.17/d3.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/c3/0.4.11/c3.min.js"></script>
{% endblock %}

{% block content %}
<style>
  h1 {
    color:#357EBD
  }

  button[type="button"] {
    margin-right: 1em;
  }
  
  .c3-axis-x path.domain {
    d: path('M0,1V0H908V1');
  }

  .c3-axis-y path.domain {
    d: path('M -1 1 H 0 V 265.5 H -1');
  }

  line {
    stroke: rgba(0, 0, 0, 0.25); 
  }
  
  .c3-axis line {
    stroke: black;
  }
</style>

<h1>{% trans "Task One: Test Simulation" %}</h1>
<hr/>
<p>{% trans "This is not the real task yet, but a simulation to help you understand the rules better." %}
<p>{% trans "You can use the test screen below to play with the different choices of the two participants." %}
<br>{% trans "Between each test, click the “reset to zero” button below to reset the calculator." %}</p>

<div class="row">
  <div id="chart" class="col-sm-12"></div>
</div>

<div class="row">
  <button class="btn btn-primary">{% trans "Next" %}</button>
  <button class="btn btn-default" type="button">{% trans "Reset to zero" %}</button>
</div>

<script>
  $(function () {
    var participants = ['Participant A', 'Participant B'];
    var participations = [7, 10];
    var gains = [7, 10];
    var losses = [3, 4];

    var chart = c3.generate({
      bindto: '#chart',
      size: {
        height: '5%'
      },
      data: {
        columns: [
          ['Contribution', 10, 7],
          ['Gain', 4, 3],
          ['Loss', 9, 2]
        ],
        colors: {
          'Contribution': '#0000FF', 
          'Gain': '#00CC00', 
          'Loss': '#FF0000'
        },
        types: {
          'Contribution': 'bar',
          'Gain': 'bar',
          'Loss': 'bar',
        },
        labels: true,
        names: {
          participants: 'Amount',
          gains: 'Gain',
          losses: 'Loss'
        }
      },
      axis: {
        x:{
          type: 'category',
          categories: participants
        },
        y: {
          label: {
            text: 'Amounts',
            position: 'outer-middle',
            tick: {
              outer: true
            }
          }
        }
      }
    });

    chart.axis.max({
        y: 20
    });
    chart.axis.min({
        y: 2
    });
  });
</script>
{% endblock %}
