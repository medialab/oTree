{% extends "global/Base.html" %}
{% load i18n %}
{% load otree_tags %}



{% block content %}
<style>
  label {
    font-weight: normal;
  }

  .control-label {font-weight: bold}
</style>
  <p>
      {% formfield player._07_what_is_your_date_of_birth %}
      <hr>
      {% formfield player._07_what_is_your_gender %}

      <div class="form-group required">
        <label class="control-label" for="id__07_all_the_people_who_live_in_the_same_household_as_you">
          {% trans "Click on all options below to show all the people who live in the same household as you. <br/>You can choose as many as you need." %}
        </label><br>

        <input type="hidden" id="id__07_all_the_people_who_live_in_the_same_household_as_you" name="_07_all_the_people_who_live_in_the_same_household_as_you">
        <select multiple="multiple" maxlength="500" id="helper__07_all_the_people_who_live_in_the_same_household_as_you">
          <option value="My legal husband or wife">{% trans "My legal husband or wife" %}</option>
          <option value="My civil union partner">{% trans "My civil union partner" %}</option>
          <option value="My de-facto partner, boyfriend or girlfriend">{% trans "My de-facto partner, boyfriend or girlfriend" %}</option>
          <option value="My mother and/or father">{% trans "My mother and/or father" %}</option>
          <option value="My children">{% trans "My children" %}</option>
          <option value="My brothers and/or sisters">{% trans "My brothers and/or sisters" %}</option>
          <option value="My flatmates">{% trans "My flatmates" %}</option>
          <option value="Don't know">{% trans "Don't know" %}</option>
        </select>
      </div>

      <hr>
      {% formfield player._07_which_country_were_you_born %}
      <hr>
      {% formfield player._07_what_year_did_you_arrive_in_France %}
  </p>
  <p><button class="btn btn-primary">{% trans "Next" %}</button></p>

  <script type="text/javascript">

    $(function() {
      $('.btn').click(function (e) {
        e.preventDefault();

        var selectMultipleValue = '',
            $selections = $('select#helper__07_all_the_people_who_live_in_the_same_household_as_you option:selected');

        $selections.each(function (i, elm) {
          selectMultipleValue += $(elm).val();
          if ($selections.length != i + 1) {
            selectMultipleValue += '|';
          }
        });

        if (selectMultipleValue !== '') {
          $('#id__07_all_the_people_who_live_in_the_same_household_as_you').val(selectMultipleValue);
          $('form').submit();
        }
      });
    });
  </script>
{% endblock %}
